## 現場で行ったgit rebase

現場でソースの管理問題があって、gitリポジトリを整理する必要があってgit rebaseで結合してみた

#### ただテスト環境での動作確認のためのマージだから、MasterブランチにPushする必要はなかった。Rebaseブランチを作ればいい

* 問題が起こった理由
   * Gitリポジトリに作業してるのは①外注会社と②開発チーム（自分が所属したフリーエンジニアチーム）がある
   * ①外注さんの作業ブランチと②開発チームブランチをマージする必要がある
   * で、なぜか①外注さんブランチが③前回の作業ソース（Masterブランチだ。。）が削除（！）されてる状態でコミットされてた。削除も問題だけど、①と③はほとんど重ねてるところが多かった。。
   * ここで②開発チームには③前回ソースがちゃんと入ってる状態なので、、この①②③を結合する必要があった

* Git Mergeだと難しいと思ったのであんまりやったことないRebaseをやってみた

### やってみたことまとめ

* どうやって解決しようか？何をわかったのか？

1. ②開発チームのリポジトリに①外注さんの最新ソースをローカルにFetchする
1. rebase用ブランチを新規作成する
1. 新規ブランチで③前回の作業コミットをわかりやすく１つのコミットでまとめる
   1. git rebase -i →squashで③と関係があるコミットを結合する
   2. まとめる際にコミット数・状況に合わせてRebaseを実行する
   3. ここでわかったのはPull Request、MergeをRebaseする場合、表示されるコミット量が半端ないことだ。（rebase上であんなに見えると全然知らなかった）これはrebase -iにして何もしないで:wqしたらOK
   4. git rebase -i squashで結合すると、コミットが一つになれるか、コミットメッセージには結合する前のメッセージが全て表示されるので、結合後でもコミット内容の確認はわかりやすかった
1. コミットまとめが終わったら①と②をrebaseする
1. diffを確認して問題解決


もし作業途中でMergeが必要ならRebaseを使ってみよう

